#!/bin/bash

##
# This is a version of git commit which ensures that the filenames listed in
# the commit editor will be listed as paths relative to the repository root
# rather than the current directory (which may not be the root).
#
# The motivation for this command comes from the desire to have an editor
# plugin when allows the user to hit <enter> on file in the pending commit
# message to see a diff of the changes to be committed. When the paths are
# relative to the current directory and the current directory is not the
# repository root, there is no reliable way to determine where the file
# actually resides since git always makes the current working directory the
# project root before opening the commit editor, so the paths are relative to
# where you were, not where you are.
##

git -c status.relativePaths=false commit "$@"
